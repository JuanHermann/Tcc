<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="#{layoutMB.template}">



	<ui:define name="title">
        Empresa
    </ui:define>

<ui:define name="description">
        Algumas configurações sobre sua empresa.
    </ui:define>
	<ui:define name="head-end">
		<ui:param name="renderBreadCrumb" value="false" />
	</ui:define>

	<ui:define name="body">
		<f:metadata>
			<f:viewParam name="id" value="#{usuarioLogadoBean.usuario.id}" />
			<f:viewAction action="#{empresa.init}" />
		</f:metadata>


		<h:form id="form" prependId="false">


			<div class="box box-primary">
				<div class="box-header with-border">

					<div class="ui-g ui-fluid">
						<div class="ui-sm-12 ui-md-2 ui-lg-1">
							<p:outputLabel value="Nome" for="nome" />
						</div>
						<div class="ui-sm-12 ui-md-4 ui-lg-5">
							<p:inputText id="nome" value="#{empresa.objeto.nome}"
								required="true" />
						</div>
					</div>




					<p:growl id="growl" sticky="true" showDetail="true" life="3000" />
				</div>

			</div>

		</h:form>
		<h:form>
			<div id="senhaSumir" class="box box-primary" style="display: none;">
				<div class="box-header with-border">
					<div class="ui-g ui-fluid">
						<div class="ui-sm-12 ui-md-2 ui-lg-1">
							<p:outputLabel value="Informe sua senha" for="senhaAtual" />
						</div>
						<div class="ui-sm-12 ui-md-4 ui-lg-5">
							<p:inputText type="password" styleClass="form-control"
								required="false" id="senhaAtual" value="#{empresa.senhaAtual}"
								requiredMessage="Senha é obrigatória." />

						</div>
					</div>
					<div class="ui-g ui-fluid">
						<div class="ui-sm-12 ui-md-2 ui-lg-1">
							<p:outputLabel value="Nova senha" for="pw" />
						</div>
						<div class="ui-sm-12 ui-md-4 ui-lg-5">
							<p:password id="pw" value="#{empresa.novaSenha}"
								styleClass="form-control" required="true" match="pw2"
								requiredMessage="Senha é obrigatória." redisplay="true"
								validatorMessage="Senhas não conferem" />
						</div>
					</div>
					<div class="ui-g ui-fluid">
						<div class="ui-sm-12 ui-md-2 ui-lg-1">
							<p:outputLabel value="Comfirme sua nova senha" for="pw2" />
						</div>
						<div class="ui-sm-12 ui-md-4 ui-lg-5">
							<p:password id="pw2" value="#{empresa.novaSenha}"
								styleClass="form-control" required="true"
								requiredMessage="Confirmação de senha é obrigatória."
								validatorMessage="Senhas não conferem" />
						</div>
					</div>
					<div class="ui-sm-12 ui-md-4 ui-lg-5">
							<p:commandButton value="Salvar Alterações"
							action="#{empresa.atualizarSenha()}" icon="fa fa-check"
							styleClass="btn-success" />
							 <div style="text-align: right; float: right;">
                	
								<p:commandButton  value="cancelar"
								onclick="javascript:mostrarSenha('senhaSumir')" type="button"
								icon="fa fa-refresh" styleClass="btn-danger" />
								</div>

						</div>
						

				</div>
			</div>
		</h:form>

		<script type="text/javascript">
			function handleLoginRequest(xhr, status, args) {
				if (args.validationFailed || !args.loggedIn) {
					PF('dlg').jq.effect("shake", {
						times : 5
					}, 100);
				} else {
					PF('dlg').hide();
					$('#loginLink').fadeOut();
				}
			}
			function mostrarSenha(id) {
				var e = document.getElementById(id);
				e.style.display = (e.style.display == 'block') ? 'none'	: 'block';
				e.scrollTop +=10;
			}
		</script>


	</ui:define>

</ui:composition>

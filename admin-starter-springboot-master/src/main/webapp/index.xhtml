<?xml version="1.0" encoding="UTF-8"?>


<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="#{layoutMB.template}">

	<ui:define name="head-end">
		<ui:param name="renderBreadCrumb" value="false" />
	</ui:define>

	<ui:define name="title">
		<h2 class="align-center">Agenda</h2>

	</ui:define>

	<ui:define name="body">

		<h:form id="formAgenda">
			<p:growl id="messages" showDetail="true" />

			<p:schedule id="schedule" value="#{indexBean.eventModel}"
				locale="pt_BR" widgetVar="myschedule" timeZone="UTC-3"
				pattern="dd/MM/yyyy" minHour="7" maxHour="20">

				<p:ajax event="dateSelect" listener="#{indexBean.onDateSelect}"
					update="eventDetails" oncomplete="PF('inserir').show();" />
				<p:ajax event="eventSelect" listener="#{indexBean.onEventSelect}"
					update="eventDetails" oncomplete="PF('inserir').show();" />
				<p:ajax event="eventMove" listener="#{indexBean.onEventMove}"
					update="messages" />
				<p:ajax event="eventResize" listener="#{indexBean.onEventResize}"
					update="messages" />

			</p:schedule>



			<p:dialog widgetVar="inserir" header="Cadastrar Horario"
				showEffect="clip" hideEffect="clip">

				<h:panelGrid id="eventDetails" columns="2">
					<h:form id="formulario">
						<p:outputLabel for="tipo" value="Tipo:" />
						<p:selectOneRadio id="tipo" value="#{IndexBean.tipo}"
							onclick="javascript:mudar('bloqueio','agendamento')"
							unselectable="true">
							<p:ajax event="change" />
							<f:selectItem itemLabel="Serviço" itemValue="servico"
								id="radioServico" />
							<f:selectItem itemLabel="Bloqueio" itemValue="bloqueio"
								id="radioBloqueio" />
						</p:selectOneRadio>
						<div id="agendamento" style="display: none;">
							<p:outputLabel for="data" value="Dia/Hora:" />
							<p:calendar id="data" value="#{indexBean.event.startDate}"
								timeZone="UTC-3" pattern="dd/MM/yyyy HH:mm" />


							<p:outputLabel for="funcionario" value="Funcionario:" />
							<p:selectOneMenu id="funcionario" converter="#{usuarioConverter}">
								<f:selectItem itemLabel="Selecione um funcionario" itemValue="" />
								<f:selectItems value="#{indexBean.funcionarios}"
									var="funcionario" itemLabel="#{funcionario.nome}"
									itemValue="#{usuario}" />
								<p:message for="funcionario" />
							</p:selectOneMenu>
							<p:outputLabel />
							<p:selectBooleanCheckbox value="#{selectBooleanView.value1}"
								itemLabel="Sem preferencia" />

							<p:outputLabel for="servico" value="Serviço:" />

							<p:selectCheckboxMenu id="servico"
								value="#{indexBean.servicosSelecionados}" label="Serviços"
								multiple="true" filter="true" filterMatchMode="startsWith"
								panelStyle="width:250px">
								<f:selectItems value="#{indexBean.servicos}" var="servico"
									itemLabel="#{servico.nome}" />

								<p:message for="servico" />
							</p:selectCheckboxMenu>

							<p:commandButton type="reset" value="Reset" />
							<p:commandButton value="Salvar"
								action="#{indexBean.salvarAgendamento}"
								oncomplete="PF('myschedule').update();PF('inserir').hide();" />

						</div>
						<div id="bloqueio" style="display: none;">
							<p:outputLabel for="inicio" value="Inicio" />
							<p:calendar id="inicio" value="#{indexBean.event.startDate}"
								timeZone="UTC-3" pattern="dd/MM/yyyy HH:mm" />

							<p:outputLabel for="final" value="Final" />
							<p:calendar id="final" value="#{indexBean.event.startDate}"
								timeZone="UTC-3" pattern="dd/MM/yyyy HH:mm" />


							<p:commandButton type="reset" value="Reset" />
							<p:commandButton value="Salvar"
								action="#{indexBean.salvarAgendamento}"
								oncomplete="PF('myschedule').update();PF('inserir').hide();" />

						</div>
					</h:form>
					 <h:form id="myFormId">
                        <p:selectOneRadio id="myRadio" value="#{indexBean.radioVal}" >
                            <p:ajax event="change" oncomplete="handleComplete(xhr, status, args,'agendamento','bloqueio')" listener="#{indexBean.test()}" />
                            <f:selectItem itemLabel="1" itemValue=" first" />
                            <f:selectItem itemLabel="2" itemValue=" second" />
                            <f:selectItem itemLabel="3" itemValue=" third" />
                        </p:selectOneRadio>
                    </h:form>
				</h:panelGrid>

			</p:dialog>
		</h:form>
		<script type="text/javascript">
			function mudar(id, id1) {
				var e = document.getElementById(id);
				var a = document.getElementById(id1);
				if (document.getElementById('radioServico').checked == true) {
					e.style.display = "block";
					a.style.display = "none";
				} else {
					e.style.display = "none";
					a.style.display = "block";
				}

			}

			function reactToChangedRadio() {
				alert("I'm in");
				var myval;
				if (document.forms['formAgenda']['formAgenda:tipo'][0].checked == true) {
					myval = "first button";
				} else if (document.forms['formAgenda']['formAgenda:tipo'][1].checked == true) {
					myval = "second button";
				}

				alert("val = " + myval);
			}
			
			function handleComplete(xhr, status, args,id,id1) {  
				var e = document.getElementById(id);
				var a = document.getElementById(id1);
				if (document.getElementById('radioServico').checked == true) {
					e.style.display = "block";
					a.style.display = "none";
				} else {
					e.style.display = "none";
					a.style.display = "block";
				} 
			 } 
		</script>



	</ui:define>


</ui:composition>
